library(gridExtra)
levels(cf$howlong) <- ordered(c('Less than 6 months|',
'6-12 months|',
'1-2 years|',
'2-4 years|',
'4+ years|'))
```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
library(tidyverse)
library(gridExtra)
theme_set(theme_light())
# Load the Data
cf <- read.csv('crossfit2015.csv')
# order 'howlong' variable
levels(cf$howlong) <- ordered(c('Less than 6 months|',
'6-12 months|',
'1-2 years|',
'2-4 years|',
'4+ years|'))
# The overall rank is calculated by summing the rank for each workout
overallrank_male <- cf[cf$category == 'Rx' & cf$division == 'Male', ] %>%
group_by(athlete_id) %>%
summarise(name = first(name),
point_total = sum(rank))
overallrank_male$overall_rank <- rank(overallrank_male$point_total)
overallrank_male$overall_rank <- as.integer(overallrank_male$overall_rank)
overallrank_female <- cf[cf$category == 'Rx' & cf$division == 'Female', ] %>%
group_by(athlete_id) %>%
summarise(name = first(name),
point_total = sum(rank))
overallrank_female$overall_rank <- rank(overallrank_female$point_total)
overallrank_female$overall_rank <- as.integer(overallrank_female$overall_rank)
# Join rank on main table
cf_rank <- cf %>%
left_join(overallrank_male[, c('athlete_id', 'overall_rank')],
by='athlete_id')
cf_rank <- cf_rank %>%
left_join(overallrank_female[, c('athlete_id', 'overall_rank')],
by='athlete_id')
cf_rank$overall_rank.x <- ifelse(!is.na(cf_rank$overall_rank.y),
cf_rank$overall_rank.y,
cf_rank$overall_rank.x)
# Keep just one column
cf_rank$overall_rank.y <- NULL
names(cf_rank)[names(cf_rank) == 'overall_rank.x'] <- 'overall_rank'
cf <- cf_rank
View(overallrank_male)
View(overallrank_male)
setwd("~/Documents/Cursos/Udacity Data Analyst/P6 - Data Visualization/Final Project/Study 1 - CF Open vs Games")
write.csv(overallrank_male, file = 'overallrank_men_open_15.csv')
